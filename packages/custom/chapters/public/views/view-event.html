<section data-ng-controller="EventsController" data-ng-init="findOneEvent()">
    <div class="col-md-8 col-md-offset-2">
        <span>{{event.created | date:'mediumDate'}}</span> /
        <span>{{event.user.name}}</span>
        <h2>{{event.chapter}} | {{event.title}}</h2>
        <div>
            <h4>{{event.eventType}}</h4>
            <p>Attendance: {{event.attendance}}</p>
            <p>Event Description: {{event.content}}</p>
            <p>Event Point of Contact: {{event.pointofcontact}}</p>
            <p>Date: {{event.date | date: 'mediumDate'}}</p>
            <p>Time: {{event.starttime}} - {{event.endtime}}</p>
            <p>Address: {{event.address}}</p>
        </div>
        <div data-ng-if="hasAuthorization(event)">
            <a class="btn" href="/events/{{event._id}}/edit">
                <i class="glyphicon glyphicon-edit">Edit </i>
            </a>
            <a class="btn" data-ng-click="removeEvent(event);">
                <i class="glyphicon glyphicon-trash">Delete</i>
            </a>
        </div>
        <hr>
        <div>
            <h2>Deliverables</h2>
        </div>
        <div class="panel-group" id="accordion">
            <div ng-repeat="deliverable in deliverables" class="panel"
                 ng-init="deliverableIndex = $index"
                 ng-class="{'panel-danger' : deliverable.status == 'Waiting on you',
                'panel-warning': deliverable.status == 'Waiting on admin',
                'panel-success': deliverable.status == 'Approved'}"
                 data-ng-init="findMembers()">
                <div class="panel-heading">
                    <h4 class="panel-title">{{deliverable.name}}</h4>
                    <p>Status: {{deliverable.status}}</p>
                </div>
                <div class="panel-body">
                    <div ng-show="deliverable.type == 'File'">
                        <p>Description for file to submit: ...</p>

                    </div>
                    <div ng-show="deliverable.type == 'Array'">
                        <!--<form editable-form name="riskTable" onaftersave="saveRiskTable(deliverableIndex)" oncancel="cancelRiskTable()">-->
                        <table class="table table-bordered table-striped">
                            <thead>
                            <tr>
                                <th>Responsibility</th>
                                <th>Member</th>
                                <!--<th>Email</th>-->
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="riskObj in deliverable.rmArray"
                                data-ng-init="setupDeliverableArray(deliverableIndex)">
                                <td>
                                    <ui-select ng-model="deliverable.rmArray[$index].position" append-to-body="'true'">
                                        <ui-select-match placeholder="Select position...">{{$select.selected}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="r in rmAvailablePositions" name="position">
                                            {{r}}
                                        </ui-select-choices>
                                    </ui-select>
                                </td>
                                <td>
                                    <ui-select ng-model="deliverable.rmArray[$index].member" append-to-body="'true'">
                                        <ui-select-match placeholder="Select member...">
                                            {{$select.selected.firstName + ' ' + $select.selected.lastName}}
                                        </ui-select-match>
                                        <ui-select-choices repeat="m in members" name="member">
                                            {{m.firstName + ' ' + m.lastName}}
                                        </ui-select-choices>
                                    </ui-select>
                                </td>
                            </tr>
                            <!--<tr ng-repeat="risk in deliverable.rmArray">-->
                            <!--<td>-->
                            <!--<span editable-select="risk.position" e-form="riskTable"-->
                            <!--e-ng-options="rm.value as rm.text for rm in rmAvailablePositions">-->
                            <!--{{showPosition(risk)}}-->
                            <!--</span>-->

                            <!--</td>-->
                            <!--<td>-->
                            <!--<span editable-select="risk.member" e-form="riskTable"-->
                            <!--e-ng-options="m.id as (m.firstName + ' ' + m.lastName) for m in members |-->
                            <!--orderBy: 'firstName'">-->
                            <!--{{showMember(risk)}}-->
                            <!--</span>-->
                            <!--</td>-->
                            <!--</tr>-->
                            <!--<tr ng-repeat="risk in deliverable.rmArray">-->
                            <!--<td><a href="#" editable-select="risk.position" e-ng-model="risk.position"-->
                            <!--onaftersave="updateRiskManagement('member',$index)"-->
                            <!--e-ng-options="rm.value as rm.text for rm in rmAvailablePositions">-->
                            <!--{{ risk.position || 'Not Set' }}-->
                            <!--</a></td>-->
                            <!--<td>-->
                            <!--<a href="#" editable-select="risk.member" e-ng-model="risk.member"-->
                            <!--onaftersave="updateRiskManagement('member',$index)"-->
                            <!--e-ng-options="m as (m.firstName + ' ' + m.lastName) for m in members | orderBy: 'firstName'">-->
                            <!--{{risk.member ?-->
                            <!--(risk.member.firstName + " " + risk.member.lastName) : 'Not Set'}}-->

                            <!--&lt;!&ndash;{{ if(risk.member)(risk.member.firstName + " " + risk.member.lastName) || 'Not Set' }}&ndash;&gt;-->
                            <!--</a>-->
                            <!--</td>-->
                            <!--&lt;!&ndash;<td>{{risk.member.name || 'Select Member'}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{risk.member.calpolyemail || 'Select Member'}}</td>&ndash;&gt;-->
                            <!--</tr>-->
                            </tbody>
                        </table>
                        <button ng-click="updateRiskManagement()">Update</button>
                        <!--<div class="btn-edit">-->
                        <!--<button type="button" class="btn btn-default" ng-show="!riskTable.$visible"-->
                        <!--ng-click="riskTable.$show()">-->
                        <!--edit-->
                        <!--</button>-->
                        <!--</div>-->
                        <!--<div class="btn-form" ng-show="riskTable.$visible">-->
                        <!--<button type="button" ng-disabled="riskTable.$waiting" ng-click="addRisk($index)"-->
                        <!--class="btn btn-default pull-right">add row-->
                        <!--</button>-->
                        <!--<button type="submit" ng-disabled="riskTable.$waiting" class="btn btn-primary">save-->
                        <!--</button>-->
                        <!--<button type="button" ng-disabled="riskTable.$waiting" ng-click="riskTable.$cancel()"-->
                        <!--class="btn btn-default">cancel-->
                        <!--</button>-->
                        <!--</div>-->
                        <!--</form>-->
                    </div>
                    <div ng-show="deliverable.type == 'String'">
                        <a href="#" editable-textarea="deliverable.strContent" onbeforesave="updateDeliverables()"
                           onaftersave="updateEvent(true)" e-rows="7" e-cols="40">
                            <pre>{{deliverable.strContent || 'Please click in this box to proceed...' }}</pre>
                        </a>
                    </div>

                    <div ng-repeat="comment in deliverable.comments">
                        <!--<p><a href="{{'http://localhost:3000' + comment.fileURL}}">Test</a></p>-->
                        <table class="table table-bordered table-striped">
                            <thead>
                            <tr>
                                <!--<th>UserID</th>-->
                                <th>File Source</th>
                                <th>Comment</th>
                                <th>Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <!--<th>{{comment.user}}</th>-->
                                <th>{{comment.fileURL}}</th>
                                <th>{{comment.comment}}</th>
                                <th>{{comment.created | date: 'mediumDate'}}</th>
                            </tr>
                            </tbody>

                        </table>
                    </div>

                    <!--<div class="row" ng-show="deliverable.type == 'File'">-->
                    <!--<div class="col-xs-6 col-md-offset-1 col-md-4">-->
                    <!--<h4>Add File</h4>-->
                    <!--<mean-upload file-dest="'/events'" upload-callback="uploadFinished(files)"-->
                    <!--upload-file-callback="commentUploadFileCallback(file,deliverable,event,$index)"></mean-upload>-->
                    <!--</div>-->
                    <!--<div class="col-xs-6 col-md-offset-1 col-md-4">-->
                    <!--<h4>Make a Comment</h4>-->
                    <!--<input type="paragraph" id="commentStr" ng-model="commentString">-->
                    <!--</div>-->
                    <!--</div>-->

                    <!--<div class="row" ng-hide="deliverable.type == 'File'">-->
                    <!--&lt;!&ndash;<div class="col-xs-6 col-md-offset-1 col-md-4">&ndash;&gt;-->
                    <!--&lt;!&ndash;<h4>Add File</h4>&ndash;&gt;-->
                    <!--&lt;!&ndash;<mean-upload file-dest="'/events/'" upload-callback="uploadFinished(files)"&ndash;&gt;-->
                    <!--&lt;!&ndash;upload-file-callback="uploadFileCallback(file,deliverable,event)"></mean-upload>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--<div class="col-xs-6">-->
                    <!--<h4>Make a Comment</h4>-->
                    <!--<input type="test" id="{{deliverable._id}}">-->
                    <!--</div>-->
                    <!--</div>-->

                </div>

                <!---->
                <!--<div class="panel-footer" style="background-color: #f2f2f2;">-->
                <!--<a class="btn btn-info" ng-click="commentOnDeliverable()">Comment</a>-->
                <!--<a class="btn btn-success" ng-show="arrayChapterAdminAndNotSubmitted(event, deliverable)"-->
                <!--ng-click="submitArrayDeliverableForReview($index,commentString)">Submit For Review</a>-->
                <!--<a class="btn btn-success" ng-show="fileChapterAdminAndNotSubmitted(event, deliverable)"-->
                <!--ng-click="submitFileDeliverableForReview($index,commentString)">Submit For Review</a>-->
                <!--<a class="btn btn-success" ng-show="stringChapterAdminAndNotSubmitted(event, deliverable)"-->
                <!--ng-click="submitStringDeliverableForReview($index,commentString)">Submit For Review</a>-->

                <!--<a class="btn btn-success" ng-show="isAppAdminAndSubmitted(event, deliverable)">Verify</a>-->
                <!--<a class="btn btn-warning" ng-show="isAppAdminAndSubmitted(event, deliverable)">In Review</a>-->
                <!--<a class="btn btn-danger" ng-show="isAppAdminAndSubmitted(event, deliverable)">Deny</a>-->

                <!--</div>-->

                <div class="panel-footer" style="background-color: #f2f2f2;">
                    <!--<div class="col-md-12 panel" style="background-color: #f2f2f2; padding-bottom: 20px;">-->
                    <!--<div class="col-xs-6">-->
                    <!--<h4>Make a Comment</h4>-->
                    <!--<input type="text" style="width: 100%; height: 50px;" id="{{deliverable._id}}">-->
                    <!--</div>-->
                    <!--</div>-->
                    <div ng-show="arrayChapterAdminAndNotSubmitted(event, deliverable)">
                        <a class="btn btn-success"
                           ng-click="submitArrayDeliverableForReview($index,commentString)">Submit For Review</a>
                    </div>
                    <div class="panel" style="background-color: #f2f2f2;">
                        <!--<a class="btn btn-info" ng-click="commentOnDeliverable()">Comment</a>-->


                        <a class="btn btn-success" ng-show="isAppAdminAndSubmitted(event, deliverable)">Verify</a>
                        <a class="btn btn-warning" ng-show="isAppAdminAndSubmitted(event, deliverable)">In Review</a>
                        <a class="btn btn-danger" ng-show="isAppAdminAndSubmitted(event, deliverable)">Deny</a>

                    </div>
                    <div class="col-md-12" style="background-color: #f2f2f2; padding-bottom: 20px;"
                         ng-show="fileChapterAdminAndNotSubmitted(event, deliverable)">
                        <div class="col-xs-6 col-md-offset-1 col-md-4">
                            <h4>Add File</h4>
                            <mean-upload file-dest="'/events'" upload-callback="uploadFinished(files)"
                                         upload-file-callback="commentUploadFileCallback(file,deliverable,event,$index)"></mean-upload>
                        </div>
                        <div class="col-xs-6 col-md-offset-1 col-md-4">
                            <h4>Make a Comment</h4>
                            <input type="text" style="width: 100%; height: 50px;" id="commentStr"
                                   ng-model="commentString">
                        </div>
                        <div>
                            <a class="btn btn-success"
                               ng-click="submitFileDeliverableForReview($index,commentString)">Submit For Review</a>
                        </div>
                    </div>
                    <div style="background-color: #f2f2f2;">
                        <!--<a class="btn btn-info" ng-click="commentOnDeliverable()">Comment</a>-->


                        <a class="btn btn-success" ng-show="isAppAdminAndSubmitted(event, deliverable)">Verify</a>
                        <a class="btn btn-warning" ng-show="isAppAdminAndSubmitted(event, deliverable)">In Review</a>
                        <a class="btn btn-danger" ng-show="isAppAdminAndSubmitted(event, deliverable)">Deny</a>

                    </div>

                    <!--<div class="col-md-12 panel" style="background-color: #f2f2f2; padding-bottom: 20px;">-->
                    <!--<div>-->
                    <!--<h4>Make a Comment</h4>-->
                    <!--<input type="text" style="width: 100%; height: 50px;" id="{{deliverable._id}}">-->
                    <!--</div>-->
                    <!--</div>-->
                    <div ng-show="stringChapterAdminAndNotSubmitted(event, deliverable)" class="panel">

                    </div>
                    <div class="panel" style="background-color: #f2f2f2;">
                        <!--<a class="btn btn-info" ng-click="commentOnDeliverable()">Comment</a>-->
                        <!--<a class="btn btn-success"-->
                        <!--ng-click="submitStringDeliverableForReview($index,commentString)">Submit For Review</a>-->
                        <!---->
                        <a class="btn btn-success"
                           ng-click="submitStringDeliverableForReview($index)">Submit For Review</a>

                        <a class="btn btn-success" ng-show="isAppAdminAndSubmitted(event, deliverable)">Verify</a>
                        <a class="btn btn-warning" ng-show="isAppAdminAndSubmitted(event, deliverable)">In Review</a>
                        <a class="btn btn-danger" ng-show="isAppAdminAndSubmitted(event, deliverable)">Deny</a>

                    </div>

                </div>
            </div>

        </div>
        <!--<div class="panel panel-default" ng-show="riskManagementDocumentRequired" id="riskManagementDocument">-->
        <!--<div class="panel-heading">-->
        <!--<h4 class="panel-title">-->
        <!--<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">Chapter Risk Management-->
        <!--Plan</a>-->
        <!--</h4>-->
        <!--</div>-->
        <!--<div id="collapseOne" class="panel-collapse collapse in">-->
        <!--<div class="panel-body">-->
        <!--<p><a href="#">Click here to submit risk management document</a></p>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <!--&lt;!&ndash;<div id="riskManagementDocument" ng-show="riskManagementDocumentRequired">&ndash;&gt;-->
        <!--&lt;!&ndash;<hr>&ndash;&gt;-->
        <!--&lt;!&ndash;<h3>Chapter Risk Management Plan </h3>&ndash;&gt;-->
        <!--&lt;!&ndash;<a href="#">Click here to submit risk management document</a>&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--<div class="panel panel-default" id="riskManagementTeam" ng-show="riskManagementTeamRequired">-->
        <!--<div class="panel-heading">-->
        <!--<h4 class="panel-title">-->
        <!--<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">Risk Management Team</a>-->
        <!--</h4>-->
        <!--</div>-->
        <!--<div id="collapseTwo" class="panel-collapse collapse in">-->
        <!--<div class="panel-body">-->
        <!--<p>You must have 1 sober monitor for every 30 guests in attendance. At least one-->
        <!--sober monitor must be a member of your executive board.</p>-->
        <!--<table class="table table-bordered table-striped">-->
        <!--<thead>-->
        <!--<tr>-->
        <!--<th>Responsibility</th>-->
        <!--<th>Member</th>-->
        <!--<th>Email</th>-->
        <!--</tr>-->
        <!--</thead>-->
        <!--<tbody>-->
        <!--<tr ng-repeat="position in riskManagementTeamPositions">-->
        <!--<td>{{position.title}}</td>-->
        <!--<td>{{position.name}}</td>-->
        <!--<td>grantcampanelli@gmail.com</td>-->
        <!--</tr>-->
        <!--</tbody>-->
        <!--</table>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="panel panel-default" id="thirdPartyEventManagementContract"-->
        <!--ng-show="thirdPartyEventManagementContractRequired">-->
        <!--<div class="panel-heading">-->
        <!--<h4 class="panel-title">-->
        <!--<a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">Third Party Event-->
        <!--Management Contract</a>-->
        <!--</h4>-->
        <!--</div>-->
        <!--<div id="collapseFour" class="panel-collapse collapse in">-->
        <!--<div class="panel-body">-->
        <!--<a href="#">Click here to submit third party event management contract</a>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="panel panel-default" id="guestList" ng-show="guestListRequired">-->
        <!--<div class="panel-heading">-->
        <!--<h4 class="panel-title">-->
        <!--<a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Pre Event Guest-->
        <!--List</a>-->
        <!--</h4>-->
        <!--</div>-->
        <!--<div id="collapseThree" class="panel-collapse collapse in">-->
        <!--<div class="panel-body">-->
        <!--<p><a href="#">Click here to submit guest list</a></p>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->

        <!--<div class="panel panel-default" id="postGuestList" ng-show="postGuestListRequired">-->
        <!--<div class="panel-heading">-->
        <!--<h4 class="panel-title">-->
        <!--<a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">Post Event Guest-->
        <!--List</a>-->
        <!--</h4>-->
        <!--</div>-->
        <!--<div id="collapseFive" class="panel-collapse collapse in">-->
        <!--<div class="panel-body">-->
        <!--<a href="#">Click here to submit post event guest list</a>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
    </div>
    <!--<div ng-if="event !== undefined" ng-include="'comments/views/index.html'"-->
    <!--data-ng-controller="CommentsController" data-ng-init="findComments(event, 2)"/>-->
    <!-- Voila, you are done. Were you expecting some more steps? :-) -->
    <!--<div id="riskManagementTeam" ng-show="riskManagementTeamRequired">-->
    <!--<hr>-->
    <!--<h3>Risk Management Team</h3>-->
    <!--<p>You must have 1 sober monitor for every 30 guests in attendance. At least one-->
    <!--sober monitor must be a member of your executive board.</p>-->
    <!--<table class="table table-bordered table-striped">-->
    <!--<thead>-->
    <!--<tr>-->
    <!--<th>Responsibility</th>-->
    <!--<th>Member</th>-->
    <!--<th>Email</th>-->
    <!--</tr>-->
    <!--</thead>-->
    <!--<tbody>-->
    <!--<tr ng-repeat="position in riskManagementTeamPositions">-->
    <!--<td>{{position.title}}</td>-->
    <!--<td>{{position.name}}</td>-->
    <!--<td>grantcampanelli@gmail.com</td>-->
    <!--</tr>-->
    <!--</tbody>-->
    <!--</table>-->
    <!--</div>-->
    <!--<div id="guestList" ng-show="guestListRequired">-->
    <!--<hr>-->
    <!--<h3>Guest List</h3>-->
    <!--<a href="#">Click here to submit guest list</a>-->
    <!--</div>-->
    <!--<div id="thirdPartyEventManagementContract"-->
    <!--ng-show="thirdPartyEventManagementContractRequired">-->
    <!--<hr>-->
    <!--<h3>Third Party Event Management Contract</h3>-->
    <!--<a href="#">Click here to submit third party event management contract</a>-->
    <!--</div>-->
    <!--<div id="postGuestList" ng-show="postGuestListRequired">-->
    <!--<hr>-->
    <!--<h3>Post Event Guest List</h3>-->
    <!--<a href="#">Click here to submit post event guest list</a>-->
    <!--</div>-->
    <!--<hr>-->
    </div>
</section>
